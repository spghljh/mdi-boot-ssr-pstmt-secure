<!-- fragments/mdi-device-manf/mdi-manf-chart.html -->
<div th:fragment="manfChart(manfName, count, chartId)">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <script th:inline="javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(function() {
      var count = /*[[${count} ?: 0]]*/ 0;
      var label = /*[[${manfName}]]*/ '제조사';

      var data = google.visualization.arrayToDataTable([
        ['', '디바이스 수', { role: 'style' }],
        [label, count, '#4285F4']
      ]);

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1, 2, {
        calc: "stringify",
        sourceColumn: 1,
        type: "string",
        role: "annotation"
      }]);

      var options = {
        backgroundColor:'transparent',
        chartArea: {width: '100%', height: '40%'},
        legend: { position: "none" },
        bar: { groupWidth: '80%' },
        hAxis: {
          viewWindowMode: 'maximized',
          showLabel: false,
          minValue: 0,
          maxValue: 250,
          textPosition: 'none',
          gridlines: { color: 'none' }
        },
        vAxis: {
          viewWindowMode: 'maximized',
          showLabel: false,
          textStyle: {
            fontSize: 26,
            bold: true
          },
          textPosition: 'none'
        },
        annotations: {
          textStyle: {
            fontSize: 22,
            bold: true,
            color: 'white',
            opacity: 1.8
          }
        }
      };

      var chart = new google.visualization.BarChart(document.getElementById(/*[[${chartId}]]*/ 'chart_div_device'));
      chart.draw(view, options);
    });
  </script>

  <div class="mdi_core">
    <div class="core001">
      <a class="core_nums" th:text="${manfName}"></a>
    </div>
    <div class="core001_num">
      <div th:attr="id=${chartId}" style="width: 900px; height:100px;"></div>
    </div>
  </div>
</div>
